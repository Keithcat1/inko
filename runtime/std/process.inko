import std::conversion::ToInteger

let PRIMARY_POOL = 0
let IO_POOL = 1

def current -> Integer {
  _INKOC.process_current_pid
}

def send!(T)(pid: ToInteger, message: T) -> T {
  _INKOC.process_send_message(pid.to_integer, message)
}

def receive {
  _INKOC.process_receive_message
}

def spawn(block: lambda) -> Integer {
  _INKOC.process_spawn(block, PRIMARY_POOL)
}

def spawn_io(block: lambda) -> Integer {
  _INKOC.process_spawn(block, IO_POOL)
}
